<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wikipedia Search</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/5f59ca6ad3.js" crossorigin="anonymous"></script>

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #f3f4f7, #e2e8f0);
      min-height: 100vh;
      color: #333;
    }

    .wiki-search-header {
      background: linear-gradient(135deg, #0077b6, #00b4d8);
      color: white;
      padding: 40px 20px;
      border-bottom-left-radius: 40px;
      border-bottom-right-radius: 40px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .wiki-logo {
      width: 140px;
      margin-bottom: 20px;
      filter: drop-shadow(0 2px 4px rgba(255, 255, 255, 0.6));
    }

    .search-box {
      position: relative;
      max-width: 550px;
      margin: 0 auto;
    }

    .search-input {
      width: 100%;
      padding: 12px 50px 12px 20px;
      border-radius: 30px;
      border: none;
      outline: none;
      font-size: 18px;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
      height: 50px;
      line-height: 50px;
      transition: all 0.3s ease;
    }

    .search-input:focus {
      transform: scale(1.02);
      box-shadow: 0 0 20px rgba(0, 183, 255, 0.5);
    }

    .search-icon {
      position: absolute;
      right: 18px;
      top: 50%;
      transform: translateY(-50%);
      color: #0077b6;
      font-size: 20px;
      pointer-events: none;
    }

    .hint {
      font-size: 14px;
      opacity: 0.9;
      margin-top: 8px;
      animation: fadeIn 2s infinite alternate;
    }

    @keyframes fadeIn {
      from {
        opacity: 0.6;
      }

      to {
        opacity: 1;
      }
    }

    /* Spinner */
    #spinner {
      margin-top: 50px;
    }

    /* Search results */
    .search-results {
      margin: 50px auto;
      max-width: 800px;
      padding: 0 15px;
    }

    .result-item {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .result-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
    }

    .result-title {
      font-size: 22px;
      font-weight: 600;
      color: #0077b6;
      text-decoration: none;
    }

    .result-url {
      color: #0a9396;
      font-size: 14px;
      text-decoration: none;
    }

    .link-description {
      font-size: 15px;
      color: #444;
      margin-top: 5px;
    }
  </style>
</head>

<body>
  <header class="wiki-search-header text-center">
    <img class="wiki-logo"
      src="https://nkb-backend-otg-media-static.s3.ap-south-1.amazonaws.com/ccbp-dynamic-webapps/wiki-logo-img.png"
      alt="Wikipedia Logo" />
    <div class="search-box">
      <input type="search" id="searchInput" class="search-input" placeholder="Search Wikipedia..." />
      <i class="fas fa-search search-icon"></i>
      <p class="hint text-light">Press <strong>Enter</strong> to search</p>
    </div>
  </header>

  <div class="container text-center d-none" id="spinner">
    <div class="spinner-border text-info" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div class="search-results" id="searchResults"></div>

  <script>
    const searchInputEl = document.getElementById('searchInput');
    const searchResultsContainer = document.getElementById('searchResults');
    const spinnerEl = document.getElementById('spinner');

    function createAndAppendSearchResult(result) {
      const resultItemDiv = document.createElement("div");
      resultItemDiv.classList.add("result-item");

      const titleAnchor = document.createElement('a');
      titleAnchor.classList.add("result-title");
      titleAnchor.href = result.link;
      titleAnchor.target = "_blank";
      titleAnchor.textContent = result.title;
      resultItemDiv.appendChild(titleAnchor);

      resultItemDiv.appendChild(document.createElement('br'));

      const urlAnchor = document.createElement('a');
      urlAnchor.classList.add("result-url");
      urlAnchor.href = result.link;
      urlAnchor.target = "_blank";
      urlAnchor.textContent = result.link;
      resultItemDiv.appendChild(urlAnchor);

      resultItemDiv.appendChild(document.createElement('br'));

      const descriptionPara = document.createElement('p');
      descriptionPara.classList.add('link-description');
      descriptionPara.innerHTML = result.description;
      resultItemDiv.appendChild(descriptionPara);

      searchResultsContainer.appendChild(resultItemDiv);
    }

    function displaySearchResults(searchResults) {
      searchResultsContainer.innerHTML = '';
      searchResults.forEach(result => {
        createAndAppendSearchResult(result);
      });
    }

    function searchWikipedia(event) {
      if (event.key === "Enter") {
        spinnerEl.classList.remove("d-none");
        searchResultsContainer.innerHTML = '';

        const searchInput = searchInputEl.value.trim();
        if (!searchInput) return;

        const url = `https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&origin=*&srsearch=${encodeURIComponent(searchInput)}`;

        fetch(url)
          .then(response => response.json())
          .then(jsonData => {
            const searchResults = jsonData.query.search.map(result => ({
              link: `https://en.wikipedia.org/?curid=${result.pageid}`,
              title: result.title,
              description: result.snippet
            }));
            spinnerEl.classList.add('d-none');
            displaySearchResults(searchResults);
          })
          .catch(error => {
            console.error('Error fetching data:', error);
            spinnerEl.classList.add('d-none');
          });
      }
    }

    searchInputEl.addEventListener("keydown", searchWikipedia);
  </script>
</body>

</html>
